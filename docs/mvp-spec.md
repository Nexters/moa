# Moa 1차 MVP 스펙

## 핵심 컨셉

> 실수령 월급 기준으로 입력받아, 월급날부터 지금까지 쌓인 금액을 시각화

---

## 온보딩 (최초 1회)

| 단계 | 항목             | 설명                                                   |
| ---- | ---------------- | ------------------------------------------------------ |
| 1    | 닉네임           | 랜덤 생성 (예: "성실한 뚱이", "부지런한 징징이")       |
| 2    | 회사명           | 랜덤 생성 (예: "집게리아", "버거왕국", "초코파이공장") |
| 3    | 월 실수령액 입력 | 세후 실제 받는 금액                                    |

> **참고**: 근무 요일(월~금), 출퇴근 시간(09:00~18:00)은 기본값으로 고정됩니다.

---

## 화면 구성

> RunCat 스타일의 메뉴바 앱 구조 (P0에서 구현, P1에서 피그마 기반 고도화)

### 전체 구조

```
┌─────────────────────────────────────────────────────────┐
│  macOS 메뉴바                              [Moa 아이콘] │
└─────────────────────────────────────────────────────────┘
                                                    │
                                                    ▼ (클릭)
                                    ┌───────────────────────┐
                                    │   커스텀 드롭다운 패널  │
                                    │  (NSPopover / Tauri)  │
                                    └───────────────────────┘
```

### 화면 목록

| 화면      | 설명                    | P0             | P1            |
| --------- | ----------------------- | -------------- | ------------- |
| 메인 패널 | 2컬럼: 정보 + 메뉴 버튼 | RunCat 스타일  | 피그마 디자인 |
| 설정 패널 | 패널 내 전환            | 기본 폼 스타일 | 피그마 디자인 |
| 온보딩    | 별도 윈도우, 3스텝      | 기본 스타일    | 피그마 디자인 |
| 축하 화면 | 월급날 Confetti         | -              | P1에서 구현   |

### 화면 전환 플로우

```
앱 시작 ─┬─ 온보딩 미완료 ─▶ 온보딩 윈도우 ─▶ 메뉴바 아이콘 표시
         │
         └─ 온보딩 완료됨 ─▶ 메뉴바 아이콘 표시
                                    │
                                    ▼ (클릭)
                              메인 패널 ◀──▶ 설정 패널
                                    │
                                    ▼ (P1: 월급날)
                              축하 화면 + Confetti
```

---

### 메인 패널 (2컬럼 레이아웃)

```
┌─────────────────────────────────────────────────────┐
│                                                     │
│  ┌─────────────────────────┬─────────────────────┐ │
│  │                         │                     │ │
│  │   📅 2024년 1월 15일    │      ┌─────────┐   │ │
│  │                         │      │   ⚙️    │   │ │
│  │   성실한 뚱이            │      │  설정   │   │ │
│  │   @ 집게리아             │      └─────────┘   │ │
│  │                         │                     │ │
│  ├─────────────────────────┤                     │ │
│  │                         │                     │ │
│  │   💰 누적 금액           │                     │ │
│  │                         │                     │ │
│  │   ₩ 1,234,567          │                     │ │
│  │                         │                     │ │
│  │   25일부터 12일째        │                     │ │
│  │   벌고 있어요            │                     │ │
│  │                         │                     │ │
│  ├─────────────────────────┤                     │ │
│  │                         │                     │ │
│  │   🟢 근무중              │                     │ │
│  │   09:00 ~ 18:00         │                     │ │
│  │                         │                     │ │
│  └─────────────────────────┴─────────────────────┘ │
│                                                     │
└─────────────────────────────────────────────────────┘
```

#### 왼쪽 영역 (정보 표시, ~70%)

| 섹션 | 항목            | 설명                                   |
| ---- | --------------- | -------------------------------------- |
| 헤더 | 오늘 일자       | "2024년 1월 15일 (월)" 형식            |
| 헤더 | 닉네임 @ 회사명 | "성실한 뚱이 @ 집게리아"               |
| 메인 | 누적 금액 라벨  | "💰 누적 금액"                         |
| 메인 | 금액 표시       | 큰 폰트, 실시간 업데이트 (₩ 1,234,567) |
| 메인 | 경과 정보       | "25일부터 12일째 벌고 있어요"          |
| 푸터 | 근무 상태       | 🟢 근무중 / ⚪ 근무종료 / 🔵 휴일      |
| 푸터 | 근무 시간       | "09:00 ~ 18:00" (고정값)               |

#### 오른쪽 영역 (메뉴 버튼, ~30%)

| 버튼 | 아이콘 | 설명             |
| ---- | ------ | ---------------- |
| 설정 | ⚙️     | 설정 패널로 전환 |

---

### 설정 패널 (패널 내 전환)

```
┌─────────────────────────────────────────────────────┐
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │  ← 뒤로                            설정     │   │
│  ├─────────────────────────────────────────────┤   │
│  │                                             │   │
│  │  닉네임                                     │   │
│  │  ┌─────────────────────────────────────┐   │   │
│  │  │ 성실한 뚱이                    [저장] │   │   │
│  │  └─────────────────────────────────────┘   │   │
│  │                                             │   │
│  │  회사명                                     │   │
│  │  ┌─────────────────────────────────────┐   │   │
│  │  │ 집게리아                       [저장] │   │   │
│  │  └─────────────────────────────────────┘   │   │
│  │                                             │   │
│  │  월 실수령액                                │   │
│  │  ┌─────────────────────────────────────┐   │   │
│  │  │ 3,000,000                 원  [저장] │   │   │
│  │  └─────────────────────────────────────┘   │   │
│  │                                             │   │
│  │  월급날                                     │   │
│  │  ┌─────────────────────────────────────┐   │   │
│  │  │ 25일                    ▼     [저장] │   │   │
│  │  └─────────────────────────────────────┘   │   │
│  │                                             │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
└─────────────────────────────────────────────────────┘
```

---

### 온보딩 윈도우 (별도 윈도우)

최초 실행 시 메뉴바 아이콘 대신 온보딩 윈도우 먼저 표시

```
┌─────────────────────────────────────────────────────┐
│                     Moa 시작하기                     │
├─────────────────────────────────────────────────────┤
│                                                     │
│              ● ○ ○  (Step 1/3)                     │
│                                                     │
│              당신의 닉네임은                         │
│                                                     │
│              🎲 성실한 뚱이                          │
│                                                     │
│              [다시 뽑기]                             │
│                                                     │
│                                                     │
│  ┌─────────────────────────────────────────────┐   │
│  │                    다음                      │   │
│  └─────────────────────────────────────────────┘   │
│                                                     │
└─────────────────────────────────────────────────────┘
```

**온보딩 스텝**:

1. 닉네임 확인 (랜덤 생성, 다시 뽑기 가능)
2. 회사명 확인 (랜덤 생성, 다시 뽑기 가능)
3. 월 실수령액 입력 → 완료

---

### 패널 사양

| 항목      | 값                          |
| --------- | --------------------------- |
| 패널 너비 | 320px                       |
| 패널 높이 | 콘텐츠에 맞게 자동          |
| 모서리    | 둥근 모서리 (12px)          |
| 그림자    | 시스템 기본 드롭다운 그림자 |
| 테마      | 다크모드 고정               |

---

## 설정 (P0)

| 항목             | 설명                     |
| ---------------- | ------------------------ |
| 닉네임 수정      | 랜덤 생성된 값 변경 가능 |
| 회사명 수정      | 랜덤 생성된 값 변경 가능 |
| 월 실수령액 수정 | 급여 금액 변경           |
| 월급날 설정      | 기본 25일 (1~31일 선택)  |

---

## 설정 (P1 - 추후)

| 항목         | 설명                       |
| ------------ | -------------------------- |
| OS 자동 실행 | 로그인 시 자동 실행 ON/OFF |

---

## 월급날 축하 기능 (P1 - 추후)

### 개요

월급날이 되면 특별한 축하 화면을 표시하여 사용자에게 성취감을 제공한다.

### 기능 상세

| 항목          | 설명                                                      |
| ------------- | --------------------------------------------------------- |
| Confetti 효과 | 월급날 팝업 열 때 Raycast 스타일의 축하 파티클 애니메이션 |
| 축하 화면     | 이번 달 총 번 금액과 축하 메시지 표시                     |
| 표시 시점     | 월급날 근무시간(09:00~18:00) 동안 팝업 열면 자동 표시     |
| 휴일 대응     | 월급날이 주말/공휴일이면 이전 평일에 표시                 |

### 휴일 판단 로직

```
실제 월급 지급일 계산:
1. 설정된 월급날(payDay)이 주말인지 확인
2. 주말이면 이전 금요일로 이동
3. 공휴일 API로 해당 날짜가 휴일인지 확인
4. 휴일이면 이전 평일로 이동 (반복)
```

### 공휴일 API

- 백엔드에서 공휴일 정보를 제공한다고 가정
- 엔드포인트: `GET /api/holidays?year={year}&month={month}`
- 응답 예시: `{ "holidays": ["2024-01-01", "2024-02-09", ...] }`

### UI 구성

```
┌─────────────────────────────┐
│        🎉 축하해요! 🎉        │
│                             │
│     이번 달 열심히 일해서     │
│                             │
│      ₩ 3,000,000           │
│                             │
│        벌었어요!             │
│                             │
│  [닫기]                      │
└─────────────────────────────┘
      ✨ Confetti 효과 ✨
```

---

## 계산 로직

### 기본 계산

```
일 실근무시간 = 퇴근시간 - 출근시간 (09:00~18:00 = 9시간)
월 근무일수 = 해당 월의 근무요일(월~금) 수
월 총근무시간 = 일 실근무시간 × 월 근무일수

일급 = 월 실수령액 ÷ 월 근무일수
시급 = 일급 ÷ 일 실근무시간
초당 금액 = 시급 ÷ 3600
```

### 월급날부터 누적 금액

```
누적 금액 = 월급날부터 현재까지 근무한 날 수 × 일급 + 오늘 근무 금액
```

- **월급날**: 기본 25일 (설정에서 변경 가능)
- **계산 기준일**: 이전 달 25일 ~ 이번 달 25일 (월급 지급 주기)
- **오늘 근무 금액**:
  - 근무일 + 근무시간 내: 초당 금액 × 출근부터 현재까지 초
  - 근무일 + 퇴근 후: 일급 (고정)
  - 비근무일: 0원

### 근무 상태 판단

- **근무중**: 오늘이 근무요일(월~금) AND 현재시간이 09:00~18:00 사이
- **근무종료**: 그 외

---

## 메뉴바 아이콘 상태

| 상태   | 조건                        | 아이콘        |
| ------ | --------------------------- | ------------- |
| 활성   | 근무요일 + 근무시간 내      | 활성 아이콘   |
| 비활성 | 비근무요일 또는 근무시간 외 | 비활성 아이콘 |

---

## 데이터 모델

```typescript
interface UserSettings {
  // 사용자 정보
  nickname: string; // 랜덤 생성 (예: "성실한 뚱이")
  companyName: string; // 랜덤 생성 (예: "집게리아")

  // 급여
  monthlyNetSalary: number; // 월 실수령액 (원)
  payDay: number; // 월급날 (1~31, 기본값: 25)

  // 메타
  onboardingCompleted: boolean;
}

// 근무 설정은 고정값 (상수로 처리)
const WORK_CONFIG = {
  workDays: [1, 2, 3, 4, 5], // 월~금
  workStartTime: '09:00',
  workEndTime: '18:00',
};
```

---

## 태스크 목록

### P0 (MVP 필수)

1. [데이터 모델 설계](tasks-todo/task-1-data-model.md)
2. [사용자 설정 커맨드](tasks-todo/task-2-user-settings-commands.md)
3. [급여 계산 엔진](tasks-todo/task-3-salary-calculator.md)
4. [온보딩 UI](tasks-todo/task-4-onboarding-ui.md)
5. [메뉴바 팝업 UI](tasks-todo/task-5-menubar-popup-ui.md)
6. [설정 화면 UI](tasks-todo/task-6-settings-ui.md)
7. [메뉴바 아이콘 상태](tasks-todo/task-7-menubar-icon-state.md)

### P1 (추후)

8. [월급날 축하 기능](tasks-todo/task-8-payday-celebration.md)
9. [UI 고도화 - 피그마 디자인 적용](tasks-todo/task-9-ui-design.md)
